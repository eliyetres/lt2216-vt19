<?xml version="1.0" encoding="UTF-8"?>
<grammar version="1.0" tag-format="semantics/1.0" root="maingame">
    <!-- Main rule. Add combinations to things here. -->
    <rule id="maingame" scope="public">
        <one-of>
            <!-- Ask for help -->
            <item><ruleref uri="#help" />
                <tag>out=rules.help;</tag></item>
                 <!-- Look around -->
                 <item><tag>out=rules.look;</tag></item>
        </one-of>
    </rule>
    <!-- GLOBAL HELP -->
    <rule id="help">
        <one-of>
            <item>help</item>
            <item>help me</item>
            <item>i don't know</item>
            <item>where am i</item>
        </one-of>
    </rule>

    <rule id="look">
        <one-of>
            <item>look</item>
            <item>look at</item>
            <item>look around</item>
            <item>move</item>
        </one-of>
    </rule>

    <!-- Actions -->
    <rule id="action">
        <one-of>
            <item>open</item>
            <item>close</item>
            <item>unlock</item>
        </one-of>
    </rule>
    <!-- Pick up key -->
    <rule id="pickup">
         <one-of>
        <item>get <tag>out="pick up";</tag></item>
        <item>take<tag>out="pick up";</tag></item>
        <item>pick<tag>out="pick up";</tag></item>
        <item>pick up<tag>out="pick up";</tag></item>
        <item>remove<tag>out="pick up";</tag></item>
        </one-of>
        <ruleref uri="#key_item" />
    </rule>
    <rule id="key_item">
        <one-of>
        <item>key<tag>out="the key";</tag></item>
        <item>a key<tag>out="the key";</tag></item>
        <item>the key<tag>out="the key";</tag></item>
        </one-of>
    </rule>
 
    <!-- Items possible for unlock -->
    <rule id="unlockable">
        <item>door</item>
    </rule>
    <!-- All items used with actions -->
<rule id="item">
    <item repeat="0-1">
        <one-of>
            <item> the </item>
            <item> a </item>
        </one-of>
    </item>
    <one-of>
        <item>door</item>
        <item>drawer</item>
        <item>window</item>
    </one-of>
    out=rules.itemField;
</rule>

</grammar>