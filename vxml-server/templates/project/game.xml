<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.0">
    <nomatch>
        I tried doing what you told me, but nothing happened.
        <reprompt />
    </nomatch>
    <noinput>
        I'm not sure what to do, tell me again.
        <reprompt />
    </noinput>
    <!-- Data model -->
    <var name="door" />
    <var name="drawer" />
    <var name="table" />
    <var name="window" />
    <var name="key" />
    <var name="selected_item" />
    <!-- Set staring states -->
    <assign name="key" expr="false" />
    <assign name="door" expr="locked" />
    <assign name="drawer" expr="closed" />
    <assign name="window" expr="closed" />
    <!-- Main game loop -->
    <form id="startgame">
        <grammar src="grammars/project_grammar.xml" />
        <block name="welcome">
        You are inside a room. Blabla game intro.
        </block>
        <field id="itemField">
           <!--  Part 1 is opening the drawer -->
            <grammar src="grammars/project_grammar.xml#items" />
            <assign name="selected_item" expr="itemField" />
            <block>The <var name="selected_item" /> is </block>
        </field>
        <!-- Check status of object -->
        <if cond="startgame$.utterance == door || startgame$.utterance == drawer || startgame$.utterance == window">
            
            <block>
                It's a
                <var name="startgame$.utterance" /> 
                .
            </block>
        </if>
        <if cond="startgame$.utterance == look || startgame$.utterance == look around">
            <goto next="#lookaround" />
        </if>
       <!--  Help  -->
        <help count="1">
            Say "look around" and I'll tell you what I see.
            <reprompt />
        </help>
        <help count="2">
Try giving me commands like "open the door".
</help>
    </form>
    <!-- Help menu listing all items and their attributes in the room -->
    <form id="lookaround">
        <block>
            <block>The items I see are:</block>
            A door that's
            <value expr="door" />
            .          
            A window that's
            <var name="window" />
            .
            In the room there is a table with a drawer.
            The drawer is
            <var name="drawer" />
            .
            <if cond="drawer == open and key==false">
                <block>
                    Inside the
                    <var name="drawer" />
                    drawer is a key.
                </block>
            </if>
            <if cond="drawer == open and key==true">
                <block>The drawer is empty.</block>
            </if>
        </block>
        <goto next="#startgame" />
    </form>
</vxml>