<?xml version="1.0" encoding="UTF-8"?>
<vxml version="2.0">
    <!-- a frame-based dialogue system  -->
    <!-- No match prompts -->
    <nomatch>
        I didn't understand.
        <reprompt />
    </nomatch>
    <noinput>
        Please say that again.
        <reprompt />
    </noinput>
    <!-- Data model -->
    <var name="from" />
    <var name="to" />
    <var name="leavedate" />
    <var name="returndate" />
    <var name="meal" />
    <var name="confirm" />
    <!-- Menu -->
    <menu id="mainmenu">
        <prompt>
            <break time="2000" />
            Welcome to the flight booking service. Do you want to
            <enumerate />
        </prompt>
        <choice next="lab4_booking"> book </choice>
        <choice next="lab4_delayed"> check delayed </choice>
    </menu>
<<<<<<< HEAD
    <!-- Delayed flights -->
    <form id="askDelayed">
        <block>
            All flights are on time.
            <goto next="#mainmenu" />
        </block>
    </form>
    <!-- Leaving from -->
    <form id="bookFlight">
        <grammar src="grammars/lab4_grammar.xml" />
        <initial name="complete">
            <prompt bargein="false">Name the city you're leaving from, where you're going and your flight and return date. </prompt>
            <!-- stops working here -->


            <catch event="nomatch noinput">
                <prompt bargein="false">Say something like "I want to go from Paris to London tomorrow, returning on Friday.</prompt>
            </catch>
            <catch event="nomatch noinput" count="2">
                <prompt bargein="false">I'm sorry couldn't make out what you said. I'll start asking one question at a time. </prompt>
                <assign name="complete" expr="true" />
            </catch>
        </initial>
        <!-- From -->
        <field name="fromField">
            <prompt bargein="false">What city are you travelling from?     
            </prompt>
            <grammar src="grammars/lab4_grammar.xml#city" />
            <nomatch>
                <prompt>Say a city name.</prompt>
            </nomatch>
            <nomatch count="2">
                <prompt>You can choose between Paris, London and New York.</prompt>
            </nomatch>
        </field>
        <!-- To -->
        <field name="toField">
            <prompt bargein="false">Where are you going?       
            </prompt>
            <grammar src="grammars/lab4_grammar.xml#city" />
            <nomatch>
                <prompt>Say a city name.</prompt>
            </nomatch>
            <nomatch count="2">
                <prompt>You can choose between Paris, London and New York.</prompt>
            </nomatch>
        </field>
        <!-- Leaving date -->
        <field name="leaveField">
            <prompt bargein="false">What date are you leaving?</prompt>
            <grammar src="grammars/lab4_grammar.xml#date" />
            <nomatch>
                <prompt>Name a day of the week.</prompt>
            </nomatch>
            <nomatch count="2">
                <prompt>You can choose tomorrow, or any day of the week.</prompt>
            </nomatch>
        </field>
        <!-- Returning date-->
        <field name="returnField">
            <prompt bargein="false">When are you returning?</prompt>
            <grammar src="grammars/lab4_grammar.xml#date" />
            <nomatch>
                <prompt>Name a day of the week.</prompt>
            </nomatch>
            <nomatch count="2">
                <prompt>You can choose tomorrow, or any day of the week.</prompt>
            </nomatch>
        </field>
        <!-- Meal-->
        <field name="mealField">
            <prompt bargein="false">Tell me if you want a standard meal, or what other special meal type you prefer. </prompt>
            <grammar src="grammars/lab4_grammar.xml#meal" />
            <nomatch>
                <prompt>What meal type would you like?</prompt>
            </nomatch>
            <nomatch count="2">
                <prompt>You can choose regular, vegetarian, vegan or gluten-free.</prompt>
            </nomatch>
            <filled>
                <assign name="from" expr="fromField" />
                <assign name="to" expr="toField" />
                <!-- Error if from and to dates are the same, start over  -->
                <if cond="from == to">
                    <prompt> I'm sorry, you can't leave and return to the same city. I'll ask you again. </prompt>
                    <goto nextitem="from" />
                </if>
                <assign name="leavedate" expr="leaveField" />
                <assign name="returndate" expr="returnField" />
                <assign name="meal" expr="mealField" />
                 <goto nextitem="#askConfirm" />
            </filled>
        </field>
        <!-- move the assigns out of the field -->
        </form>
        <!-- Confirmation -->
        <form id="askConfirm">
        <field name="confirm"></field>
        <prompt>
            Your flight from
            <value expr="from" />
            to
            <value expr="to" />
            leaving on
            <value expr="leavedate" />
            , returning on
            <value expr="returndate" />
            on has been reserved. Your meal preference is
            <value expr="meal" />
            . Do you want to confirm this booking?
        </prompt>
        <grammar src="grammars/lab4_grammar.xml#yesno" />
        <filled>
            <if cond="confirmation == 'no'">
                <prompt>I'll ask you for information one piece at a time.</prompt>
                <clear namelist="from" />
                <clear namelist="to" />
                <clear namelist="leavedate" />
                <clear namelist="returndate" />
                <clear namelist="meal" />
            </if>
        </filled>
    </form>
=======


>>>>>>> f082581fb74ea408d49f559bed61b7636477b6b7
</vxml>